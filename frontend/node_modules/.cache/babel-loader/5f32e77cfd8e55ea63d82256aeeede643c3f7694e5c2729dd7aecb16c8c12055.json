{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Summary.css';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Summary=_ref=>{let{url}=_ref;const[orders,setOrders]=useState([]);const[filter,setFilter]=useState(\"All\");const fetchAllOrders=async()=>{try{const response=await axios.get(url+\"/api/order/list\");if(response.data.success){const filteredOrders=response.data.data.filter(order=>order.status!==\"Canceled\").sort((a,b)=>new Date(b.date)-new Date(a.date));setOrders(filteredOrders);}else{toast.error(\"Error fetching orders\");}}catch(error){console.error(\"Error fetching orders:\",error);toast.error(\"Error fetching orders\");}};useEffect(()=>{fetchAllOrders();},[]);// Run once on mount\nconst filteredOrders=filter===\"All\"?orders:orders.filter(order=>order.status===filter);const summarizeOrders=()=>{const summary={};let totalPrice=0;filteredOrders.forEach(order=>{order.items.forEach(item=>{if(summary[item.name]){summary[item.name].count+=item.quantity;}else{summary[item.name]={count:item.quantity,price:item.price};}totalPrice+=item.price*item.quantity;// Assuming item.price is defined\n});});return{summary,totalPrice};};const{summary,totalPrice}=summarizeOrders();return/*#__PURE__*/_jsxs(\"div\",{className:\"summary-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"summary-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Food Item\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(summary).map(_ref2=>{let[foodItem,{count}]=_ref2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:foodItem}),/*#__PURE__*/_jsx(\"td\",{children:count})]},foodItem);})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"total-price\",children:[\"Total Price: $\",totalPrice.toFixed(2)]})]});};export default Summary;","map":{"version":3,"names":["React","useEffect","useState","axios","toast","jsx","_jsx","jsxs","_jsxs","Summary","_ref","url","orders","setOrders","filter","setFilter","fetchAllOrders","response","get","data","success","filteredOrders","order","status","sort","a","b","Date","date","error","console","summarizeOrders","summary","totalPrice","forEach","items","item","name","count","quantity","price","className","children","Object","entries","map","_ref2","foodItem","toFixed"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/Summary/Summary.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Summary.css';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst Summary = ({url}) => {\n    const [orders, setOrders] = useState([]);\n    const [filter, setFilter] = useState(\"All\");\n\n    const fetchAllOrders = async () => {\n        try {\n          const response = await axios.get(url + \"/api/order/list\");\n          if (response.data.success) {\n            const filteredOrders = response.data.data\n              .filter(order => order.status !== \"Canceled\")\n              .sort((a, b) => new Date(b.date) - new Date(a.date));\n    \n            setOrders(filteredOrders);\n          } else {\n            toast.error(\"Error fetching orders\");\n          }\n        } catch (error) {\n          console.error(\"Error fetching orders:\", error);\n          toast.error(\"Error fetching orders\");\n        }\n    };\n\n    useEffect(() => {\n        fetchAllOrders();\n    }, []); // Run once on mount\n\n    const filteredOrders = filter === \"All\" \n    ? orders \n    : orders.filter(order => order.status === filter);\n\n    const summarizeOrders = () => {\n        const summary = {};\n        let totalPrice = 0;\n\n        filteredOrders.forEach(order => {\n            order.items.forEach(item => {\n                if (summary[item.name]) {\n                    summary[item.name].count += item.quantity;\n                } else {\n                    summary[item.name] = { count: item.quantity, price: item.price };\n                }\n                totalPrice += item.price * item.quantity; // Assuming item.price is defined\n            });\n        });\n\n        return { summary, totalPrice };\n    };\n\n    const { summary, totalPrice } = summarizeOrders();\n\n    return (\n        <div className=\"summary-container\">\n            <h3>Order Summary</h3>\n            <table className='summary-table'>\n                <thead>\n                    <tr>\n                        <th>Food Item</th>\n                        <th>Quantity</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {Object.entries(summary).map(([foodItem, { count }]) => (\n                        <tr key={foodItem}>\n                            <td>{foodItem}</td>\n                            <td>{count}</td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n            <h4 className=\"total-price\">Total Price: ${totalPrice.toFixed(2)}</h4>\n        </div>\n    );\n}\n\nexport default Summary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}