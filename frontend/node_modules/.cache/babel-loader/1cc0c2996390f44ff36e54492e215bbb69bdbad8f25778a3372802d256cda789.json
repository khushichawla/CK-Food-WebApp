{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Orders.css';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=_ref=>{let{url}=_ref;const[orders,setOrders]=useState([]);const[filter,setFilter]=useState(\"All\");const fetchAllOrders=async()=>{try{const response=await axios.get(url+\"/api/order/list\");if(response.data.success){const filteredOrders=response.data.data.filter(order=>order.status!==\"Canceled\").sort((a,b)=>new Date(b.date)-new Date(a.date));setOrders(filteredOrders);}else{toast.error(\"Error fetching orders\");}}catch(error){console.error(\"Error fetching orders:\",error);toast.error(\"Error fetching orders\");}};const statusHandler=async(event,orderId)=>{const response=await axios.post(url+\"/api/order/status\",{orderId,status:event.target.value});if(response.data.success){await fetchAllOrders();}};useEffect(()=>{fetchAllOrders();},[]);// Filter orders based on selected filter\nconst filteredOrders=filter===\"All\"?orders:orders.filter(order=>order.status===filter);return/*#__PURE__*/_jsxs(\"div\",{className:\"order add\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"heading\",children:\"Order Page:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-options\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"order-filter\",children:\"Filter Orders: \"}),/*#__PURE__*/_jsx(\"select\",{id:\"order-filter\",onChange:e=>setFilter(e.target.value),value:filter,className:\"filter-dropdown\",children:[\"All\",\"Order Pending\",\"Order Approved\",\"Payment Received\",\"Delivered\"].map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:status},status))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-list\",children:filteredOrders.map((order,index)=>{var _order$user,_order$user2;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"order-item-food\",children:order.items.map((item,index)=>index===order.items.length-1?`${item.name} x ${item.quantity}`:`${item.name} x ${item.quantity}, `)}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-item-info\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"User:\"}),\" \",(_order$user=order.user)===null||_order$user===void 0?void 0:_order$user.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",(_order$user2=order.user)===null||_order$user2===void 0?void 0:_order$user2.phone,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Date:\"}),\" \",new Date(order.date).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",order.amount]}),/*#__PURE__*/_jsxs(\"select\",{onChange:event=>statusHandler(event,order._id),value:order.status,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Order Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Order Approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Canceled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Payment Received\",children:\"Payment Received\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivered\",children:\"Delivered\"})]})]},index);})})]});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","axios","toast","jsx","_jsx","jsxs","_jsxs","Orders","_ref","url","orders","setOrders","filter","setFilter","fetchAllOrders","response","get","data","success","filteredOrders","order","status","sort","a","b","Date","date","error","console","statusHandler","event","orderId","post","target","value","className","children","htmlFor","id","onChange","e","map","index","_order$user","_order$user2","items","item","length","name","quantity","user","phone","toLocaleDateString","amount","_id"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/Orders/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Orders.css';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst Orders = ({ url }) => {\n  const [orders, setOrders] = useState([]);\n  const [filter, setFilter] = useState(\"All\");\n\n  const fetchAllOrders = async () => {\n    try {\n      const response = await axios.get(url + \"/api/order/list\");\n      if (response.data.success) {\n        const filteredOrders = response.data.data\n          .filter(order => order.status !== \"Canceled\")\n          .sort((a, b) => new Date(b.date) - new Date(a.date));\n\n        setOrders(filteredOrders);\n      } else {\n        toast.error(\"Error fetching orders\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching orders:\", error);\n      toast.error(\"Error fetching orders\");\n    }\n  };\n\n  const statusHandler = async (event, orderId) => {\n    const response = await axios.post(url + \"/api/order/status\", {\n      orderId,\n      status: event.target.value\n    });\n    if (response.data.success) {\n      await fetchAllOrders();\n    }\n  };\n\n  useEffect(() => {\n    fetchAllOrders();\n  }, []);\n\n  // Filter orders based on selected filter\n  const filteredOrders = filter === \"All\" \n    ? orders \n    : orders.filter(order => order.status === filter);\n\n  return (\n    <div className='order add'>\n      <h3 className='heading'>Order Page:</h3>\n\n      {/* Filter Options as Dropdown */}\n      <div className='filter-options'>\n        <label htmlFor=\"order-filter\">Filter Orders: </label>\n        <select \n          id=\"order-filter\" \n          onChange={(e) => setFilter(e.target.value)} \n          value={filter}\n          className=\"filter-dropdown\"\n        >\n          {[\"All\", \"Order Pending\", \"Order Approved\", \"Payment Received\", \"Delivered\"].map(status => (\n            <option key={status} value={status}>\n              {status}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className='order-list'>\n        {filteredOrders.map((order, index) => (\n          <div key={index} className='order-item'>\n            <div>\n              <p className='order-item-food'>\n                {order.items.map((item, index) => (\n                  index === order.items.length - 1\n                    ? `${item.name} x ${item.quantity}`\n                    : `${item.name} x ${item.quantity}, `\n                ))}\n              </p>\n              <p className='order-item-info'>\n                <b>User:</b> {order.user?.name} <br/>\n                <b>Phone:</b> {order.user?.phone} <br/>\n                <b>Date:</b> {new Date(order.date).toLocaleDateString()}\n              </p>\n            </div>\n            <p>Price: ${order.amount}</p>\n            <select onChange={(event) => statusHandler(event, order._id)} value={order.status}>\n              <option value=\"Order Pending\">Pending</option>\n              <option value=\"Order Approved\">Approved</option>\n              <option value=\"Canceled\">Cancelled</option>\n              <option value=\"Payment Received\">Payment Received</option>\n              <option value=\"Delivered\">Delivered</option>\n            </select>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Orders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}