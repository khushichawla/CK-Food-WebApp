{"ast":null,"code":"import React,{useContext,useEffect}from\"react\";import{useNavigate}from\"react-router\";import\"./Cart.css\";import{StoreContext}from\"../../context/StoreContext\";import{toast}from\"react-toastify\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const{cartItems,food_list,removeFromCart,getTotalCartAmount,getTotalCartQuantity,resetCart,url,token}=useContext(StoreContext);const navigate=useNavigate();const placeOrder=async event=>{event.preventDefault();let orderItems=[];food_list.forEach(item=>{if(cartItems[item._id]>0){let itemInfo={...item};itemInfo[\"quantity\"]=cartItems[item._id];orderItems.push(itemInfo);}});// console.log(orderItems);\nlet orderData={items:orderItems,amount:getTotalCartAmount()+2};let response=await axios.post(url+\"/api/order/place\",orderData,{headers:{token}});if(response.data.success){// const {session_url} = response.data;\n// window.location.replace(session_url);\nresetCart();toast.success(\"Order Placed Successfully\");navigate(\"/myorders\");}else{alert(\"Please Sign Up or Login.\");}};useEffect(()=>{if(!token){navigate(\"/cart\");}else if(getTotalCartAmount===0){navigate(\"/cart\");}},[token,getTotalCartAmount,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items-title\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Items\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Remove\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),food_list.map((item,index)=>{if(cartItems[item._id]>0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items-title cart-items-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:url+\"/images/\"+item.image,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"p\",{children:cartItems[item._id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",item.price*cartItems[item._id]]}),/*#__PURE__*/_jsx(\"p\",{onClick:()=>removeFromCart(item._id),className:\"cross\",children:\"x\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]},item._id);}return null;})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Cart Total: \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$ \",getTotalCartAmount()]})]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Items: \",/*#__PURE__*/_jsx(\"b\",{children:getTotalCartQuantity()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:placeOrder,children:\"PLACE ORDER\"})]})})]});};export default Cart;","map":{"version":3,"names":["React","useContext","useEffect","useNavigate","StoreContext","toast","axios","jsx","_jsx","jsxs","_jsxs","Cart","cartItems","food_list","removeFromCart","getTotalCartAmount","getTotalCartQuantity","resetCart","url","token","navigate","placeOrder","event","preventDefault","orderItems","forEach","item","_id","itemInfo","push","orderData","items","amount","response","post","headers","data","success","alert","className","children","map","index","src","image","alt","name","price","onClick"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/Cart/Cart.js"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport \"./Cart.css\";\nimport { StoreContext } from \"../../context/StoreContext\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\nconst Cart = () => {\n  const {\n    cartItems,\n    food_list,\n    removeFromCart,\n    getTotalCartAmount,\n    getTotalCartQuantity,\n    resetCart,\n    url,\n    token,\n  } = useContext(StoreContext);\n  const navigate = useNavigate();\n\n  const placeOrder = async (event) => {\n    event.preventDefault();\n    let orderItems = [];\n    food_list.forEach((item) => {\n      if (cartItems[item._id] > 0) {\n        let itemInfo = { ...item };\n        itemInfo[\"quantity\"] = cartItems[item._id];\n        orderItems.push(itemInfo);\n      }\n    });\n    // console.log(orderItems);\n    let orderData = {\n      items: orderItems,\n      amount: getTotalCartAmount() + 2,\n    };\n\n    let response = await axios.post(url + \"/api/order/place\", orderData, {\n      headers: { token },\n    });\n    if (response.data.success) {\n      // const {session_url} = response.data;\n      // window.location.replace(session_url);\n      resetCart();\n      toast.success(\"Order Placed Successfully\");\n      navigate(\"/myorders\");\n    } else {\n      alert(\"Please Sign Up or Login.\");\n    }\n  };\n\n  useEffect(() => {\n    if (!token) {\n      navigate(\"/cart\");\n    } else if (getTotalCartAmount === 0) {\n      navigate(\"/cart\");\n    }\n  }, [token, getTotalCartAmount, navigate]);\n\n  return (\n    <div className=\"cart\">\n      <div className=\"cart-items\">\n        <div className=\"cart-items-title\">\n          <p>Items</p>\n          <p>Title</p>\n          <p>Price</p>\n          <p>Quantity</p>\n          <p>Total</p>\n          <p>Remove</p>\n        </div>\n        <br />\n        <hr />\n        {food_list.map((item, index) => {\n          if (cartItems[item._id] > 0) {\n            return (\n              <div key={item._id}>\n                <div className=\"cart-items-title cart-items-item\">\n                  <img src={url + \"/images/\" + item.image} alt=\"\" />\n                  <p>{item.name}</p>\n                  <p>${item.price}</p>\n                  <p>{cartItems[item._id]}</p>\n                  <p>${item.price * cartItems[item._id]}</p>\n                  <p onClick={() => removeFromCart(item._id)} className=\"cross\">\n                    x\n                  </p>\n                </div>\n                <hr />\n              </div>\n            );\n          }\n          return null;\n        })}\n      </div>\n      <div className=\"cart-bottom\">\n        <div className=\"cart-total\">\n          <h2>\n            Cart Total: <b>$ {getTotalCartAmount()}</b>\n          </h2>\n          <h2>\n            Total Items: <b>{getTotalCartQuantity()}</b>\n          </h2>\n          <button onClick={placeOrder}>PLACE ORDER</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}