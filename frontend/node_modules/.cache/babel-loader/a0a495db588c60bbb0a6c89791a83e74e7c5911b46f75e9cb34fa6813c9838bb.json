{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'./MyOrders.css';import{StoreContext}from'../../context/StoreContext';import{GoPackage}from\"react-icons/go\";import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyOrders=()=>{const{url,token}=useContext(StoreContext);const[data,setData]=useState([]);const fetchOrders=async()=>{const response=await axios.post(url+\"/api/order/userorders\",{},{headers:{token}});setData(response.data.data);};const cancelOrder=async orderId=>{try{console.log(\"order id: \",orderId);const response=await axios.post(url+\"/api/order/cancel\",{orderId},{headers:{token}});console.log(\"error: \",response.data.message);if(response.data.success){// toast.success(\"Order canceled successfully\");\nfetchOrders();// Refresh the orders list\n}}catch(error){console.error(\"Error canceling order:\",error);}};useEffect(()=>{if(token){fetchOrders();}},[token]);useEffect(()=>{const pendingOrApprovedOrders=data.filter(order=>order.status===\"Order Pending\"||order.status===\"Order Approved\");if(pendingOrApprovedOrders.length>0){toast.info(\"Reminder: Please make the payment for your pending or approved orders.\");}},[data]);// removing orders with status 'Canceled'\nconst filteredOrders=data.filter(data=>data.status!==\"Canceled\");return/*#__PURE__*/_jsxs(\"div\",{className:\"my-orders\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:filteredOrders.map((order,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"my-orders-order\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:/*#__PURE__*/_jsx(GoPackage,{})}),/*#__PURE__*/_jsx(\"p\",{children:order.items.map((item,index)=>{if(index===order.items.length-1){return item.name+\" x \"+item.quantity;}else{return item.name+\" x \"+item.quantity+\", \";}})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",order.amount,\".00\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Items: \",order.items.length]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u25CF\"}),/*#__PURE__*/_jsxs(\"b\",{children:[\" \",order.status]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchOrders,children:\"Track Order\"}),order.status===\"Order Pending\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelOrder(order._id),children:\"Cancel\"})]},index);})})]});};export default MyOrders;","map":{"version":3,"names":["React","useContext","useEffect","useState","StoreContext","GoPackage","axios","toast","jsx","_jsx","jsxs","_jsxs","MyOrders","url","token","data","setData","fetchOrders","response","post","headers","cancelOrder","orderId","console","log","message","success","error","pendingOrApprovedOrders","filter","order","status","length","info","filteredOrders","className","children","map","index","items","item","name","quantity","amount","onClick","_id"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/MyOrders/MyOrders.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport './MyOrders.css'\nimport { StoreContext } from '../../context/StoreContext';\nimport { GoPackage } from \"react-icons/go\";\nimport axios from 'axios'\nimport { toast } from 'react-toastify';\n\nconst MyOrders = () => {\n    const {url, token} = useContext(StoreContext)\n    const [data, setData] = useState([]);\n\n    const fetchOrders = async () => {\n        const response = await axios.post(url + \"/api/order/userorders\", {}, {headers:{token}})\n        setData(response.data.data);\n    }\n\n    const cancelOrder = async (orderId) => {\n        try {\n            console.log(\"order id: \", orderId)\n            const response = await axios.post(url + \"/api/order/cancel\", { orderId }, {\n                headers: { token }\n            });\n            console.log(\"error: \", response.data.message)\n            if (response.data.success) {\n                // toast.success(\"Order canceled successfully\");\n                fetchOrders(); // Refresh the orders list\n            }\n        } catch (error) {\n            console.error(\"Error canceling order:\", error);\n        }\n    };\n\n\n    useEffect(()=>{\n        if (token) {\n            fetchOrders();\n        }\n    },[token])\n\n    useEffect(() => {\n        const pendingOrApprovedOrders = data.filter(order => order.status === \"Order Pending\" || order.status === \"Order Approved\");\n        if (pendingOrApprovedOrders.length > 0) {\n            toast.info(\"Reminder: Please make the payment for your pending or approved orders.\");\n        }\n    }, [data]);\n\n    // removing orders with status 'Canceled'\n    const filteredOrders = data\n          .filter(data => data.status !== \"Canceled\")\n    \n  return (\n    <div className='my-orders'>\n      <h2>My Orders</h2>\n      <div className='container'>\n        {filteredOrders.map((order, index)=>{\n            return (\n                <div key={index} className='my-orders-order'>\n                    <span className=\"icon\"><GoPackage /></span>\n                    <p>{order.items.map((item, index)=>{\n                        if (index === order.items.length - 1) {\n                            return item.name + \" x \" + item.quantity;\n                        } else {\n                            return item.name + \" x \" + item.quantity + \", \";\n                        }\n                    })}</p>\n                    <p>${order.amount}.00</p>\n                    <p>Items: {order.items.length}</p>\n                    <p><span>&#x25cf;</span><b> {order.status}</b></p>\n                    <button onClick={fetchOrders}>Track Order</button>\n                    {order.status === \"Order Pending\" && (\n                        <button onClick={() => cancelOrder(order._id)}>Cancel</button>\n                    )}\n                </div>\n            )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default MyOrders\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}