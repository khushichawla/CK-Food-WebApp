{"ast":null,"code":"var _jsxFileName = \"/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/LoginPage/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport './LoginPage.css';\nimport { StoreContext } from '../../context/StoreContext';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const {\n    url,\n    setToken,\n    setUserRole\n  } = useContext(StoreContext);\n  const [currState, setCurrState] = useState(\"Sign Up\");\n  const [data, setData] = useState({\n    name: \"\",\n    phone: \"\",\n    password: \"\"\n  });\n  const navigate = useNavigate(); // Initialize useNavigate\n\n  const onChangeHandler = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const onLogin = async event => {\n    event.preventDefault(); // Prevent default form submission\n\n    const newUrl = currState === \"Login\" ? `${url}/api/user/login` : `${url}/api/user/register`;\n    try {\n      const response = await axios.post(newUrl, data);\n      if (response.data.success) {\n        setToken(response.data.token);\n        setUserRole(response.data.role); // Set the user role in context\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"userRole\", response.data.role);\n\n        // Navigate based on role\n        navigate(response.data.role === \"Admin\" ? \"/add\" : \"/\");\n      } else {\n        alert(response.data.message);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert(\"An error occurred. Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-popup\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onLogin,\n      className: \"login-popup-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-popup-title\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: currState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-popup-inputs\",\n        children: [currState === \"Login\" ? null : /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          onChange: onChangeHandler,\n          value: data.name,\n          type: \"text\",\n          placeholder: \"Your name\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phone\",\n          onChange: onChangeHandler,\n          value: data.phone,\n          type: \"phone\",\n          placeholder: \"Your phone number\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          onChange: onChangeHandler,\n          value: data.password,\n          type: \"password\",\n          placeholder: \"Your Password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: currState === \"Sign Up\" ? \"Create account\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), currState === 'Login' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Create a new account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setCurrState(\"Sign Up\"),\n          children: \"Click here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already have an account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setCurrState(\"Login\"),\n          children: \"Login here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"iWX+KDpFes9WNqEGKXfQQv4XwUU=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useContext","useState","StoreContext","axios","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","url","setToken","setUserRole","currState","setCurrState","data","setData","name","phone","password","navigate","onChangeHandler","event","target","value","prevData","onLogin","preventDefault","newUrl","response","post","success","token","role","localStorage","setItem","alert","message","error","console","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","onChange","type","placeholder","required","onClick","_c","$RefreshReg$"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/pages/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport './LoginPage.css';\nimport { StoreContext } from '../../context/StoreContext';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\n\nconst LoginPage = () => {\n  const { url, setToken, setUserRole } = useContext(StoreContext);\n  const [currState, setCurrState] = useState(\"Sign Up\");\n  const [data, setData] = useState({\n    name: \"\",\n    phone: \"\",\n    password: \"\"\n  });\n  const navigate = useNavigate(); // Initialize useNavigate\n\n  const onChangeHandler = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setData((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const onLogin = async (event) => {\n    event.preventDefault(); // Prevent default form submission\n\n    const newUrl = currState === \"Login\" ? `${url}/api/user/login` : `${url}/api/user/register`;\n\n    try {\n      const response = await axios.post(newUrl, data);\n      if (response.data.success) {\n        setToken(response.data.token);\n        setUserRole(response.data.role); // Set the user role in context\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"userRole\", response.data.role);\n\n        // Navigate based on role\n        navigate(response.data.role === \"Admin\" ? \"/add\" : \"/\");\n      } else {\n        alert(response.data.message);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert(\"An error occurred. Please try again.\");\n    }\n  };\n\n  return (\n    <div className='login-popup'>\n      <form onSubmit={onLogin} className='login-popup-container'>\n        <div className='login-popup-title'>\n          <h2>{currState}</h2>\n        </div>\n        <div className='login-popup-inputs'>\n          {currState === \"Login\" ? null : (\n            <input\n              name='name'\n              onChange={onChangeHandler}\n              value={data.name}\n              type='text'\n              placeholder='Your name'\n              required\n            />\n          )}\n          <input\n            name='phone'\n            onChange={onChangeHandler}\n            value={data.phone}\n            type='phone'\n            placeholder='Your phone number'\n            required\n          />\n          <input\n            name='password'\n            onChange={onChangeHandler}\n            value={data.password}\n            type='password'\n            placeholder='Your Password'\n            required\n          />\n        </div>\n        <button type='submit'>\n          {currState === \"Sign Up\" ? \"Create account\" : \"Login\"}\n        </button>\n        {currState === 'Login' ? (\n          <p>Create a new account? <span onClick={() => setCurrState(\"Sign Up\")}>Click here</span></p>\n        ) : (\n          <p>Already have an account? <span onClick={() => setCurrState(\"Login\")}>Login here</span></p>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}