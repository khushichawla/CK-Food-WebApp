{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{Routes,Route,Navigate}from'react-router-dom';import Navbar from'./components/Navbar/Navbar';import NavbarAdmin from'./components/NavbarAdmin/NavbarAdmin';import Sidebar from'./components/Sidebar/Sidebar';import Home from'./pages/Home/Home';import Cart from'./pages/Cart/Cart';import PlaceOrder from'./pages/PlaceOrder/PlaceOrder';import MyOrders from'./pages/MyOrders/MyOrders';import Add from'./pages/Add/Add';import List from'./pages/List/List';import Orders from'./pages/Orders/Orders';import Summary from'./pages/Summary/Summary';import LoginPage from'./pages/LoginPage/LoginPage';import Footer from'./components/Footer/Footer';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{StoreContext}from'./context/StoreContext';// Import StoreContext\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{const{token,userRole,setUserRole}=useContext(StoreContext);const[isAuthenticated,setIsAuthenticated]=useState(false);const url=\"http://localhost:4000\";useEffect(()=>{const storedToken=localStorage.getItem('token');const role=localStorage.getItem('userRole');if(storedToken){setUserRole(role);setIsAuthenticated(true);}},[setUserRole]);useEffect(()=>{// This will run whenever token or userRole changes\n// console.log(\"Authentication state changed:\", { token, userRole });\nsetIsAuthenticated(!!token);// Update authentication state based on token\n},[token,userRole]);const renderRoutes=()=>{if(isAuthenticated){if(userRole===\"Admin\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(NavbarAdmin,{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-content\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(Add,{url:url})}),/*#__PURE__*/_jsx(Route,{path:\"/list\",element:/*#__PURE__*/_jsx(List,{url:url})}),/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(Orders,{url:url})}),/*#__PURE__*/_jsx(Route,{path:\"/summary\",element:/*#__PURE__*/_jsx(Summary,{url:url})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/add\"})})]})]})]});}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})}),/*#__PURE__*/_jsx(Route,{path:\"/order\",element:/*#__PURE__*/_jsx(PlaceOrder,{})}),/*#__PURE__*/_jsx(Route,{path:\"/myorders\",element:/*#__PURE__*/_jsx(MyOrders,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})]})});}}else{return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[renderRoutes(),/*#__PURE__*/_jsx(Footer,{})]});};export default App;","map":{"version":3,"names":["React","useContext","useEffect","useState","Routes","Route","Navigate","Navbar","NavbarAdmin","Sidebar","Home","Cart","PlaceOrder","MyOrders","Add","List","Orders","Summary","LoginPage","Footer","ToastContainer","StoreContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","token","userRole","setUserRole","isAuthenticated","setIsAuthenticated","url","storedToken","localStorage","getItem","role","renderRoutes","children","className","path","element","to"],"sources":["/Users/khushichawla/Desktop/Projects/web-app/frontend/src/App.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport Navbar from './components/Navbar/Navbar';\nimport NavbarAdmin from './components/NavbarAdmin/NavbarAdmin';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport Home from './pages/Home/Home';\nimport Cart from './pages/Cart/Cart';\nimport PlaceOrder from './pages/PlaceOrder/PlaceOrder';\nimport MyOrders from './pages/MyOrders/MyOrders';\nimport Add from './pages/Add/Add';\nimport List from './pages/List/List';\nimport Orders from './pages/Orders/Orders';\nimport Summary from './pages/Summary/Summary';\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport Footer from './components/Footer/Footer';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { StoreContext } from './context/StoreContext'; // Import StoreContext\n\nconst App = () => {\n  const { token, userRole, setUserRole } = useContext(StoreContext); \n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const url = \"http://localhost:4000\";\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    const role = localStorage.getItem('userRole');\n    if (storedToken) {\n      setUserRole(role);\n      setIsAuthenticated(true);\n    }\n  }, [setUserRole]);\n\n  useEffect(() => {\n    // This will run whenever token or userRole changes\n    // console.log(\"Authentication state changed:\", { token, userRole });\n    setIsAuthenticated(!!token); // Update authentication state based on token\n  }, [token, userRole]);\n\n  const renderRoutes = () => {\n    if (isAuthenticated) {\n      if (userRole === \"Admin\") {\n        return (\n          <>\n            <ToastContainer />\n            <NavbarAdmin />\n            <hr />\n            <div className='app-content'>\n              <Sidebar />\n              <Routes>\n                <Route path=\"/add\" element={<Add url={url} />} />\n                <Route path=\"/list\" element={<List url={url} />} />\n                <Route path=\"/orders\" element={<Orders url={url} />} />\n                <Route path=\"/summary\" element={<Summary url={url} />} />\n                <Route path=\"*\" element={<Navigate to=\"/add\" />} />\n              </Routes>\n            </div>\n          </>\n        );\n      } else {\n        return (\n          <>\n            <div className=\"App\">\n            <ToastContainer />\n              <Navbar />\n              <Routes>\n                <Route path=\"/\" element={<Home />} />\n                <Route path=\"/cart\" element={<Cart />} />\n                <Route path=\"/order\" element={<PlaceOrder />} />\n                <Route path=\"/myorders\" element={<MyOrders />} />\n                <Route path=\"*\" element={<Navigate to=\"/\" />} />\n              </Routes>\n            </div>\n          </>\n        );\n      }\n    } else {\n      return (\n        <Routes>\n          <Route path=\"/login\" element={<LoginPage />} />\n          <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n        </Routes>\n      );\n    }\n  };\n\n  return (\n    <>\n      {renderRoutes()}\n      <Footer />\n    </>\n  );\n};\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,MAAO,CAAAC,WAAW,KAAM,sCAAsC,CAC9D,MAAO,CAAAC,OAAO,KAAM,8BAA8B,CAClD,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,UAAU,KAAM,+BAA+B,CACtD,MAAO,CAAAC,QAAQ,KAAM,2BAA2B,CAChD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CACjC,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,MAAM,KAAM,uBAAuB,CAC1C,MAAO,CAAAC,OAAO,KAAM,yBAAyB,CAC7C,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,OAASC,cAAc,KAAQ,gBAAgB,CAC/C,MAAO,uCAAuC,CAC9C,OAASC,YAAY,KAAQ,wBAAwB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvD,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAG9B,UAAU,CAACoB,YAAY,CAAC,CACjE,KAAM,CAACW,eAAe,CAAEC,kBAAkB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAA+B,GAAG,CAAG,uBAAuB,CAEnChC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiC,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACjD,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC7C,GAAIF,WAAW,CAAE,CACfJ,WAAW,CAACO,IAAI,CAAC,CACjBL,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CACF,CAAC,CAAE,CAACF,WAAW,CAAC,CAAC,CAEjB7B,SAAS,CAAC,IAAM,CACd;AACA;AACA+B,kBAAkB,CAAC,CAAC,CAACJ,KAAK,CAAC,CAAE;AAC/B,CAAC,CAAE,CAACA,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAErB,KAAM,CAAAS,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIP,eAAe,CAAE,CACnB,GAAIF,QAAQ,GAAK,OAAO,CAAE,CACxB,mBACEL,KAAA,CAAAE,SAAA,EAAAa,QAAA,eACEjB,IAAA,CAACH,cAAc,GAAE,CAAC,cAClBG,IAAA,CAACf,WAAW,GAAE,CAAC,cACfe,IAAA,QAAK,CAAC,cACNE,KAAA,QAAKgB,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1BjB,IAAA,CAACd,OAAO,GAAE,CAAC,cACXgB,KAAA,CAACrB,MAAM,EAAAoC,QAAA,eACLjB,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,MAAM,CAACC,OAAO,cAAEpB,IAAA,CAACT,GAAG,EAACoB,GAAG,CAAEA,GAAI,CAAE,CAAE,CAAE,CAAC,cACjDX,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,OAAO,CAACC,OAAO,cAAEpB,IAAA,CAACR,IAAI,EAACmB,GAAG,CAAEA,GAAI,CAAE,CAAE,CAAE,CAAC,cACnDX,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEpB,IAAA,CAACP,MAAM,EAACkB,GAAG,CAAEA,GAAI,CAAE,CAAE,CAAE,CAAC,cACvDX,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,UAAU,CAACC,OAAO,cAAEpB,IAAA,CAACN,OAAO,EAACiB,GAAG,CAAEA,GAAI,CAAE,CAAE,CAAE,CAAC,cACzDX,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACjB,QAAQ,EAACsC,EAAE,CAAC,MAAM,CAAE,CAAE,CAAE,CAAC,EAC7C,CAAC,EACN,CAAC,EACN,CAAC,CAEP,CAAC,IAAM,CACL,mBACErB,IAAA,CAAAI,SAAA,EAAAa,QAAA,cACEf,KAAA,QAAKgB,SAAS,CAAC,KAAK,CAAAD,QAAA,eACpBjB,IAAA,CAACH,cAAc,GAAE,CAAC,cAChBG,IAAA,CAAChB,MAAM,GAAE,CAAC,cACVkB,KAAA,CAACrB,MAAM,EAAAoC,QAAA,eACLjB,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACb,IAAI,GAAE,CAAE,CAAE,CAAC,cACrCa,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,OAAO,CAACC,OAAO,cAAEpB,IAAA,CAACZ,IAAI,GAAE,CAAE,CAAE,CAAC,cACzCY,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEpB,IAAA,CAACX,UAAU,GAAE,CAAE,CAAE,CAAC,cAChDW,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEpB,IAAA,CAACV,QAAQ,GAAE,CAAE,CAAE,CAAC,cACjDU,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACjB,QAAQ,EAACsC,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,EAC1C,CAAC,EACN,CAAC,CACN,CAAC,CAEP,CACF,CAAC,IAAM,CACL,mBACEnB,KAAA,CAACrB,MAAM,EAAAoC,QAAA,eACLjB,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEpB,IAAA,CAACL,SAAS,GAAE,CAAE,CAAE,CAAC,cAC/CK,IAAA,CAAClB,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACjB,QAAQ,EAACsC,EAAE,CAAC,QAAQ,CAAE,CAAE,CAAE,CAAC,EAC/C,CAAC,CAEb,CACF,CAAC,CAED,mBACEnB,KAAA,CAAAE,SAAA,EAAAa,QAAA,EACGD,YAAY,CAAC,CAAC,cACfhB,IAAA,CAACJ,MAAM,GAAE,CAAC,EACV,CAAC,CAEP,CAAC,CAED,cAAe,CAAAS,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}